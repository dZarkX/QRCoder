{"version":3,"file":"options.js","sources":["../../src/options/options.ts"],"sourcesContent":["import '@material/web/button/filled-button.js';\nimport '@material/web/textfield/outlined-text-field.js';\nimport '@material/web/switch/switch.js';\n\nimport { qs } from '@/utils/dom';\nimport { getDefaultCustomizationSettings } from '@/services/defaults';\nimport { getFromStorage, getStorageKeys, setInStorage } from '@/services/storage';\nimport type { QrCustomizationSettings } from '@/types/qr';\n\nconst keys = getStorageKeys();\n\nfunction showToast(message: string) {\n  const el = qs<HTMLDivElement>(document, '#snackbar');\n  el.textContent = message;\n  el.classList.add('show');\n  window.setTimeout(() => el.classList.remove('show'), 1600);\n}\n\nfunction parseColor(value: string): string {\n  const v = value.trim();\n  if (!v) return '#000000';\n  return v;\n}\n\nasync function main() {\n  const btnSave = qs<HTMLElement>(document, '#btnSave');\n  const fg = qs<HTMLInputElement>(document, '#fg');\n  const bg = qs<HTMLInputElement>(document, '#bg');\n  const eyeInner = qs<HTMLInputElement>(document, '#eyeInner');\n  const eyeOuter = qs<HTMLInputElement>(document, '#eyeOuter');\n  const transparentBg = qs<HTMLInputElement>(document, '#transparentBg');\n  const size = qs<HTMLInputElement>(document, '#size');\n\n  const defaults = (await getFromStorage(keys.defaultSettings)) ?? getDefaultCustomizationSettings();\n\n  fg.value = defaults.colors.foreground;\n  bg.value = defaults.colors.background;\n  eyeInner.value = defaults.colors.eyeInner;\n  eyeOuter.value = defaults.colors.eyeOuter;\n  (transparentBg as any).selected = defaults.colors.transparentBackground;\n  size.value = String(defaults.size.preset === 'custom' ? defaults.size.customSize : defaults.size.preset);\n\n  btnSave.addEventListener('click', async () => {\n    const next: QrCustomizationSettings = {\n      ...defaults,\n      colors: {\n        ...defaults.colors,\n        foreground: parseColor(fg.value),\n        background: parseColor(bg.value),\n        eyeInner: parseColor(eyeInner.value),\n        eyeOuter: parseColor(eyeOuter.value),\n        transparentBackground: Boolean((transparentBg as any).selected)\n      },\n      size: {\n        preset: 'custom',\n        customSize: Math.max(64, Number(size.value) || 256)\n      }\n    };\n\n    await setInStorage(keys.defaultSettings, next);\n    showToast('Saved');\n  });\n}\n\nmain().catch(() => {\n  const el = document.createElement('div');\n  el.style.padding = '16px';\n  el.textContent = 'Failed to load options.';\n  document.body.appendChild(el);\n});\n"],"names":["keys","getStorageKeys","showToast","message","el","qs","parseColor","value","v","main","btnSave","fg","bg","eyeInner","eyeOuter","transparentBg","size","defaults","getFromStorage","getDefaultCustomizationSettings","next","setInStorage"],"mappings":"oEASA,MAAMA,EAAOC,EAAA,EAEb,SAASC,EAAUC,EAAiB,CAClC,MAAMC,EAAKC,EAAmB,SAAU,WAAW,EACnDD,EAAG,YAAcD,EACjBC,EAAG,UAAU,IAAI,MAAM,EACvB,OAAO,WAAW,IAAMA,EAAG,UAAU,OAAO,MAAM,EAAG,IAAI,CAC3D,CAEA,SAASE,EAAWC,EAAuB,CACzC,MAAMC,EAAID,EAAM,KAAA,EAChB,OAAKC,GAAU,SAEjB,CAEA,eAAeC,GAAO,CACpB,MAAMC,EAAUL,EAAgB,SAAU,UAAU,EAC9CM,EAAKN,EAAqB,SAAU,KAAK,EACzCO,EAAKP,EAAqB,SAAU,KAAK,EACzCQ,EAAWR,EAAqB,SAAU,WAAW,EACrDS,EAAWT,EAAqB,SAAU,WAAW,EACrDU,EAAgBV,EAAqB,SAAU,gBAAgB,EAC/DW,EAAOX,EAAqB,SAAU,OAAO,EAE7CY,EAAY,MAAMC,EAAelB,EAAK,eAAe,GAAMmB,EAAA,EAEjER,EAAG,MAAQM,EAAS,OAAO,WAC3BL,EAAG,MAAQK,EAAS,OAAO,WAC3BJ,EAAS,MAAQI,EAAS,OAAO,SACjCH,EAAS,MAAQG,EAAS,OAAO,SAChCF,EAAsB,SAAWE,EAAS,OAAO,sBAClDD,EAAK,MAAQ,OAAOC,EAAS,KAAK,SAAW,SAAWA,EAAS,KAAK,WAAaA,EAAS,KAAK,MAAM,EAEvGP,EAAQ,iBAAiB,QAAS,SAAY,CAC5C,MAAMU,EAAgC,CACpC,GAAGH,EACH,OAAQ,CACN,GAAGA,EAAS,OACZ,WAAYX,EAAWK,EAAG,KAAK,EAC/B,WAAYL,EAAWM,EAAG,KAAK,EAC/B,SAAUN,EAAWO,EAAS,KAAK,EACnC,SAAUP,EAAWQ,EAAS,KAAK,EACnC,sBAAuB,EAASC,EAAsB,QAAQ,EAEhE,KAAM,CACJ,OAAQ,SACR,WAAY,KAAK,IAAI,GAAI,OAAOC,EAAK,KAAK,GAAK,GAAG,CAAA,CACpD,EAGF,MAAMK,EAAarB,EAAK,gBAAiBoB,CAAI,EAC7ClB,EAAU,OAAO,CACnB,CAAC,CACH,CAEAO,EAAA,EAAO,MAAM,IAAM,CACjB,MAAML,EAAK,SAAS,cAAc,KAAK,EACvCA,EAAG,MAAM,QAAU,OACnBA,EAAG,YAAc,0BACjB,SAAS,KAAK,YAAYA,CAAE,CAC9B,CAAC"}