const e={page:"qr_generate_from_page",link:"qr_generate_from_link",image:"qr_generate_from_image"};function i(){chrome.contextMenus.removeAll(()=>{chrome.contextMenus.create({id:e.page,title:"Generate QR from this page",contexts:["page"]}),chrome.contextMenus.create({id:e.link,title:"Generate QR from this link",contexts:["link"]}),chrome.contextMenus.create({id:e.image,title:"Generate QR from this image",contexts:["image"]})})}chrome.runtime.onInstalled.addListener(()=>{i()});chrome.contextMenus.onClicked.addListener(async(r,a)=>{const o=r.menuItemId;if(!(a==null?void 0:a.id))return;let t,n;o===e.page?(t=r.pageUrl,n="contextPage"):o===e.link?(t=r.linkUrl,n="contextLink"):o===e.image&&(t=r.srcUrl,n="contextImage"),!(!t||!n)&&(await chrome.storage.local.set({pendingContext:{payload:t,sourceType:n,at:Date.now()}}),await chrome.action.openPopup())});
//# sourceMappingURL=background.js.map
